syntax = "proto3";

service WGExchange {
  // Send Client publickey and recieve a unique identifier
  rpc addClient(Credentials) returns (RequestId);

  // Send unique identifier to retrieve ClientConfig
  rpc getConfig(RequestId) returns (ClientConfig);
}

message RequestId {
  bytes uuid = 1;
}

message Address {
  string addr = 1;
  int32 mask = 2;
  bool is_ipv6 = 3;
}

message Credentials {
  optional bytes pre_shared_key = 1;
  bytes pub_key = 2;
}

message Peer {
  string endpoint = 1;
  Credentials creds = 2;
  repeated Address addr_list = 3;
}

message ClientConfig {
  repeated string dns = 1;
  Peer peer = 2;
}